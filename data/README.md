# Processed Data Directory

This directory contains processed and consolidated data files generated from the raw data exports.

## Purpose

This directory stores cleaned, merged, and processed datasets that are ready for analysis and visualization. Unlike the raw data exports which are in various formats (JSON, CSV), these files are standardized for easy consumption by the analysis scripts.

## Data Files

### my_garmin_data.tsv

Consolidated Garmin health and activity data in tab-separated format.

**Generated by:** `raw-data/garmin-export/01-prepare-steps.py`

**Source data:** Raw Garmin GDPR export (JSON files)

**Columns:**
- `date` - Date of measurement (YYYY-MM-DD)
- `steps_cnt` - Total steps for the day
- `min_hr` - Minimum heart rate (bpm)
- `min_avg_hr` - Minimum average heart rate (bpm)
- `max_avg_hr` - Maximum average heart rate (bpm)
- `max_hr` - Maximum heart rate (bpm)
- `resting_hr` - Resting heart rate (bpm)
- `sleep_start` - Sleep start timestamp
- `sleep_end` - Sleep end timestamp

**Format:** Tab-separated values (TSV)

**Example:**
```tsv
date	steps_cnt	min_hr	min_avg_hr	max_avg_hr	max_hr	resting_hr	sleep_start	sleep_end
2018-10-20	4427	45	47	121	132	45	2018-10-19 20:00:00	2018-10-20 03:00:00
```

## Generating Processed Data

### Garmin Data

To generate or update the Garmin processed data:

```bash
cd raw-data/garmin-export
python 01-prepare-steps.py --verbose
```

This will:
1. Read all Garmin JSON files from `raw-data/garmin-export/data/`
2. Extract steps, heart rate, and sleep data
3. Merge datasets by date
4. Output to `data/my_garmin_data.tsv`

## Using Processed Data

The analysis scripts in `anal/scripts/` consume data from this directory:

```bash
cd anal/scripts

# Visualize step counts
python 02-plot-steps.py --show-plot

# Analyze with verbose output
python 02-plot-steps.py --verbose --output-calendar steps_calendar.png
```

## Data Lifecycle

```
Raw Data (raw-data/)
    ↓
Preparation Scripts (raw-data/*/01-prepare-*.py)
    ↓
Processed Data (data/) ← You are here
    ↓
Analysis Scripts (anal/scripts/)
    ↓
Visualizations & Insights
```

## Privacy & Git

All data files in this directory are gitignored by default to protect personal information. Only this README file is tracked in version control.

**Never commit:**
- `my_garmin_data.tsv` - Contains personal health metrics
- Any other TSV/CSV files generated in this directory
- Temporary or intermediate data files

## File Naming Convention

When adding new processed data files, follow this pattern:
- `my_[source]_data.[ext]` - For personal data from a specific source
- Use `.tsv` for tab-separated data
- Use `.csv` for comma-separated data
- Use descriptive names that indicate the data source

## Maintenance

- **Update data**: Re-run preparation scripts when you have new raw data exports
- **Backup**: Consider backing up processed files separately (encrypted if sensitive)
- **Cleanup**: Remove outdated processed files if no longer needed
- **Validate**: Check data quality after re-processing using `--verbose` flags

## Future Data Files

As you add more data sources, you might create:
- `my_nomie_aggregated.tsv` - Aggregated Nomie tracking data
- `my_toggl_summary.tsv` - Summarized time tracking data
- `my_combined_metrics.tsv` - Cross-source metrics
